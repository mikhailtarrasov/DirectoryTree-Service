# README #

## Сервис «Справочник - Дерево» ##

### Задание ###

Необходимо создать Web API сервис для работы со справочником со структурой в виде дерева.

Сервис должен уметь создавать, обновлять и удалять элементы справочника, а также предоставлять любое поддерево этого справочника.

Для хранения справочника использовать базу данных MS SQL Server

Используемая ORM - EntityFramework с CodeFirst.


### Методы: ###

|Название|Параметры|Описание|
|--------|---------|--------|
Create|string Id, string ParentId|Создает новый элемент справочника.Если элемент сохранен успешно – возвращает код 200. Если элемент с таким Id уже существует – возвращает код 400. Если произошла какая-то ошибка – возвращает код 500
Update|string Id,string ParentId|Обновляет уже существующий элемент. Если элемент обновлён успешно – возвращает код 200. Если элемент с таким Id не существует – возвращает код 400. Если обновление создаст петлю – возвращает код 400. Если произошла какая-то ошибка – возвращает код 500
Delete|string Id|Удаляет уже существующий элемент справочника. Элемент необходимо удалить вместе со всеми «детьми». Если элемент удален успешно – возвращает код 200. Если элемент с таким Id не существует – возвращает код 400. Если произошла какая-то ошибка – возвращает код 500
Get|string Id|Возвращает все поддерево корнем которого является элемент с идентификатором равным Id. Если элемент с таким Id не существует – возвращает код 400. Если произошла какая-то ошибка – возвращает код 500

### Пример ###

Вызов|Параметры|Результат|Примечание
-----|-----------|---------------|-----------
Create|	Id = “a1”; ParentId = “b1”|	400|	Нет элемента с Id “b1”
Create|	Id = “a1”; ParentId = null|	200|	 
Create|	Id = “a2”; ParentId = “a1”|	200|	 
Create|	Id = “a3”; ParentId = “a1”|	200|	 
Create|	Id = “a4”; ParentId = “a2”|	200|	 
Create|	Id = “a3”; ParentId = “a1”|	400|	Элемент “a3” уже существует
Create|	Id = “a5”; ParentId = “a2”|	200|	 
Update|	Id = “a6”; ParentId = “a2”|	400|	Нет элемента с Id “a6”
Update|	Id = “a1”; ParentId = “a4”|	400|	Петля
Update|	Id = “a5”; ParentId = “a3”|	200|	 
Delete|	Id = “a7”|	400|	Нет элемента с Id “a7”
Delete|	Id = “a3”|	200|	 
Create|	Id = “a8”; ParentId = “a2”|	200|	 
Get|	Id = “a9”|	400|	Нет элемента с Id “a9”
Get|	Id = “a1”|	200|	Result1 (см ниже)
Get|	Id = “a2”|	200|	Result2 (см ниже)



Result1: 

         { "id":"a1",

           "childs":[ {"id":"a2",

                       "childs":[ {"id":"a8",

                                   "childs":[]},
 
                                  {"id":"a4",

                                   "childs":[]}

                                ]

    	              }

	            ]

         }


Result2: 
         
         {"id":"a2",

          "childs":[ { "id":"a8",

            	       "childs":[]},

                     { "id":"a4",

                       "childs":[]}

                   ]

         }